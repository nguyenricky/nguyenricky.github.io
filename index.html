<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Luận ^^</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Lavishly+Yours&display=swap" rel="stylesheet" />
</head>
<style>
  html,
  body {
    height: 100%;
    padding: 0;
    margin: 0;
    /* background: #000; */
    background-image: url(missluan.jpg);
    background-size: cover;
    background-position-x: center;
  }
  #typedtext {
    width: calc(100% - 80px);
    color: white;
    position: absolute;
    top: 50px;
    text-align: center;
    font-size: 2em;
    margin: 0 40px;
    font-family: "Lavishly Yours";
    z-index: 5;
    font-weight: 500;
  }
  .navigate-to {
    position: absolute;
    bottom: 16px;
    right: 12px;
    text-align: center;
    z-index: 99999;
  }
  .navigate-to a {
    font-family: "Roboto";
    color: white;
    text-align: center;
    text-decoration: none;
    background: #d71b1b;
    font-size: 12px;
    border-radius: 10px;
    padding: 8px;
    font-weight: bold;
  }
  .textfield {
    width: calc(100% - 80px);
    position: absolute;
    display: flex;
    justify-content: center;
    top: 160px;
    margin: 0 40px;
    z-index: 6;
  }
  #textarealuan {
    width: 100%;
    min-height: 150px;
    background: transparent;
    padding: 12px;
    color: white;
    font-size: 15px;
    font-weight: 500;
    border-radius: 20px;
    text-align: left;
  }
</style>
<body>
  <!-- <div id="typedtext">Cậu có chuyện gì vậy Luận, hãy chia sẻ với tớ nhé ?</div>
  <div class="textfield">
    <textarea placeholder="|..." id="textarealuan"></textarea>
    <div class="navigate-to">
      <a onclick="writeFunction()">Gửi tớ</a>
    </div>
  </div> -->
  <script>
    var aText = new Array(
      "Luận này, cậu có biết điều làm tớ sợ nhất là gì không?",
      "Đó chính là khi cậu lặng thinh. Tớ suy nghĩ rất nhiều, tớ nghĩ tới mọi khoảnh khắc, mọi sự việc, mọi thứ mà tớ đã từng làm, từng nói. Có phải chăng một điều gì đó tớ đã khiến cậu cảm thấy khó chịu không. Tớ rất muốn cậu chia sẻ với tớ để tớ có thể được biết.",
      "Hãy giúp tớ xua tan sự thấp thỏm, mong ngóng này nhé. Tớ viết hơi dài rồi, tớ xin phép được",
      ".....",
      "===== Kết Luận ====="
    );
    var iSpeed = 150; // time delay of print out
    var iIndex = 0; // start printing array at this posision
    var iArrLength = aText[0].length; // the length of the text array
    var iScrollAt = 20; // start scrolling up at this many lines

    var iTextPos = 0; // initialise text position
    var sContents = ""; // initialise contents variable
    var iRow; // initialise current row

    function typewriter() {
      sContents = " ";
      iRow = Math.max(0, iIndex - iScrollAt);
      var destination = document.getElementById("typedtext");

      while (iRow < iIndex) {
        sContents += aText[iRow++] + "<br />";
      }
      destination.innerHTML =
        sContents + aText[iIndex].substring(0, iTextPos) + "_";
      if (iTextPos++ == iArrLength) {
        iTextPos = 0;
        iIndex++;
        if (iIndex != aText.length) {
          iArrLength = aText[iIndex].length;
          setTimeout("typewriter()", 500);
        }
      } else {
        setTimeout("typewriter()", iSpeed);
      }
    }
    // typewriter();
    window.addEventListener("load", function (event) {
      // Code to execute when the page finishes loading
      myFunction();
    });
    function writeFunction() {
        const getDate = new Date();
        const timeNow = getDate.getTime();
        const valueInput = document.getElementById("textarealuan").value;
        console.log("input=========================", valueInput);
        const requestOptions = {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ name: valueInput, id: "1998", time: timeNow }),
        };

        fetch(
          "https://63ef3817271439b7fe6a42fe.mockapi.io/api/v1/loginnote",
          requestOptions
        )
          .then((response) => {
            // window.location.href = "muoibaythanghai.html";
          })
          .catch((error) => {
            // window.location.href = "muoibaythanghai.html";
          });
      }
    function myFunction() {
      const getDate = new Date();
      const timeNow = getDate.getTime();
      const requestOptions = {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          name: "Luan Viewed",
          id: "1998",
          time: timeNow,
        }),
      };

      fetch(
        "https://63ef3817271439b7fe6a42fe.mockapi.io/api/v1/loginnote",
        requestOptions
      )
        .then((response) => {
          // window.location.href = "muoibaythanghai.html";
          // document.getElementById("status").innerHTML = "Tớ nhớ cậu !";
        })
        .catch((error) => {
          // window.location.href = "muoibaythanghai.html";
          // document.getElementById("status").innerHTML = "Tớ nhớ cậu !";
        });
    }
  </script>
</body>

</html>
